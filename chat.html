<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Samia Messenger Pro</title>
Â  Â  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
Â  Â  <link rel="preconnect" href="https://fonts.googleapis.com">
Â  Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
Â  Â  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  /* Light mode variables */
Â  Â  Â  Â  Â  Â  --background-light: #FFFFFF;
Â  Â  Â  Â  Â  Â  --background-secondary-light: #F0F2F5;
Â  Â  Â  Â  Â  Â  --user-bubble-gradient-light: linear-gradient(135deg, #0084FF, #0078FF, #006AFF);
Â  Â  Â  Â  Â  Â  --bot-bubble-light: #F0F0F0;
Â  Â  Â  Â  Â  Â  --text-primary-light: #1C1E21;
Â  Â  Â  Â  Â  Â  --text-secondary-light: #65676B;
Â  Â  Â  Â  Â  Â  --text-on-accent-light: #FFFFFF;
Â  Â  Â  Â  Â  Â  --accent-color: #0084FF;
Â  Â  Â  Â  Â  Â  --accent-hover: #0063CC;
Â  Â  Â  Â  Â  Â  --online-status: #31A24C;
Â  Â  Â  Â  Â  Â  --input-bg-light: #F0F2F5;
Â  Â  Â  Â  Â  Â  --input-border-light: #E4E6EB;
Â  Â  Â  Â  Â  Â  --button-secondary-bg-light: #F0F2F5;
Â  Â  Â  Â  Â  Â  --button-secondary-text-light: #65676B;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  /* Dark mode variables */
Â  Â  Â  Â  Â  Â  --background-dark: #121212;
Â  Â  Â  Â  Â  Â  --background-secondary-dark: #18191A;
Â  Â  Â  Â  Â  Â  --user-bubble-gradient-dark: linear-gradient(135deg, #0084FF, #0078FF, #006AFF);
Â  Â  Â  Â  Â  Â  --bot-bubble-dark: #252525;
Â  Â  Â  Â  Â  Â  --text-primary-dark: #FFFFFF;
Â  Â  Â  Â  Â  Â  --text-secondary-dark: #B0B2B8;
Â  Â  Â  Â  Â  Â  --text-on-accent-dark: #FFFFFF;
Â  Â  Â  Â  Â  Â  --input-bg-dark: #3A3B3C;
Â  Â  Â  Â  Â  Â  --input-border-dark: #3A3B3C;
Â  Â  Â  Â  Â  Â  --button-secondary-bg-dark: #3A3B3C;
Â  Â  Â  Â  Â  Â  --button-secondary-text-dark: #B0B2B8;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  /* Common variables */
Â  Â  Â  Â  Â  Â  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
Â  Â  Â  Â  Â  Â  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  --radius-sm: 8px;
Â  Â  Â  Â  Â  Â  --radius-md: 18px;
Â  Â  Â  Â  Â  Â  --radius-lg: 24px;
Â  Â  Â  Â  Â  Â  --radius-full: 999px;
Â  Â  Â  Â  Â  Â  --transition-fast: 0.15s ease;
Â  Â  Â  Â  Â  Â  --transition-normal: 0.25s ease;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  /* Default to light mode */
Â  Â  Â  Â  Â  Â  --background: var(--background-light);
Â  Â  Â  Â  Â  Â  --background-secondary: var(--background-secondary-light);
Â  Â  Â  Â  Â  Â  --user-bubble-gradient: var(--user-bubble-gradient-light);
Â  Â  Â  Â  Â  Â  --bot-bubble: var(--bot-bubble-light);
Â  Â  Â  Â  Â  Â  --text-primary: var(--text-primary-light);
Â  Â  Â  Â  Â  Â  --text-secondary: var(--text-secondary-light);
Â  Â  Â  Â  Â  Â  --text-on-accent: var(--text-on-accent-light);
Â  Â  Â  Â  Â  Â  --input-bg: var(--input-bg-light);
Â  Â  Â  Â  Â  Â  --input-border: var(--input-border-light);
Â  Â  Â  Â  Â  Â  --button-secondary-bg: var(--button-secondary-bg-light);
Â  Â  Â  Â  Â  Â  --button-secondary-text: var(--button-secondary-text-light);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .dark-mode {
Â  Â  Â  Â  Â  Â  --background: var(--background-dark);
Â  Â  Â  Â  Â  Â  --background-secondary: var(--background-secondary-dark);
Â  Â  Â  Â  Â  Â  --user-bubble-gradient: var(--user-bubble-gradient-dark);
Â  Â  Â  Â  Â  Â  --bot-bubble: var(--bot-bubble-dark);
Â  Â  Â  Â  Â  Â  --text-primary: var(--text-primary-dark);
Â  Â  Â  Â  Â  Â  --text-secondary: var(--text-secondary-dark);
Â  Â  Â  Â  Â  Â  --text-on-accent: var(--text-on-accent-dark);
Â  Â  Â  Â  Â  Â  --input-bg: var(--input-bg-dark);
Â  Â  Â  Â  Â  Â  --input-border: var(--input-border-dark);
Â  Â  Â  Â  Â  Â  --button-secondary-bg: var(--button-secondary-bg-dark);
Â  Â  Â  Â  Â  Â  --button-secondary-text: var(--button-secondary-text-dark);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  * {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
Â  Â  Â  Â  Â  Â  -webkit-tap-highlight-color: transparent;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  background-color: var(--background-secondary);
Â  Â  Â  Â  Â  Â  color: var(--text-primary);
Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  font-size: 15px;
Â  Â  Â  Â  Â  Â  line-height: 1.4;
Â  Â  Â  Â  Â  Â  transition: background-color var(--transition-normal);
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .chat-app {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  Â  Â  max-width: 100%;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  background-color: var(--background);
Â  Â  Â  Â  Â  Â  transition: background-color var(--transition-normal);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  @media (min-width: 768px) {
Â  Â  Â  Â  Â  Â  .chat-app {
Â  Â  Â  Â  Â  Â  Â  Â  max-width: 768px;
Â  Â  Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  Â  Â  border-left: 1px solid rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  Â  Â  border-right: 1px solid rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .chat-header {
Â  Â  Â  Â  Â  Â  padding: 12px 16px;
Â  Â  Â  Â  Â  Â  background-color: var(--background);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  z-index: 10;
Â  Â  Â  Â  Â  Â  position: sticky;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-sm);
Â  Â  Â  Â  Â  Â  transition: background-color var(--transition-normal);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .back-button {
Â  Â  Â  Â  Â  Â  margin-right: 12px;
Â  Â  Â  Â  Â  Â  width: 32px;
Â  Â  Â  Â  Â  Â  height: 32px;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  color: var(--accent-color);
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: background-color var(--transition-fast);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .back-button:hover {
Â  Â  Â  Â  Â  Â  background-color: var(--input-bg);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .profile-pic {
Â  Â  Â  Â  Â  Â  width: 40px;
Â  Â  Â  Â  Â  Â  height: 40px;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  Â  Â  Â  margin-right: 12px;
Â  Â  Â  Â  Â  Â  background-color: var(--input-bg);
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  flex-shrink: 0;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .profile-pic img {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .profile-pic::after {
Â  Â  Â  Â  Â  Â  content: '';
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  bottom: 0;
Â  Â  Â  Â  Â  Â  right: 0;
Â  Â  Â  Â  Â  Â  width: 12px;
Â  Â  Â  Â  Â  Â  height: 12px;
Â  Â  Â  Â  Â  Â  background-color: var(--online-status);
Â  Â  Â  Â  Â  Â  border: 2px solid var(--background);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  Â  Â  Â  animation: pulse 2s infinite;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  @keyframes pulse {
Â  Â  Â  Â  Â  Â  0% { opacity: 1; }
Â  Â  Â  Â  Â  Â  50% { opacity: 0.5; }
Â  Â  Â  Â  Â  Â  100% { opacity: 1; }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .header-info {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  min-width: 0;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .profile-name {
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  font-size: 16px;
Â  Â  Â  Â  Â  Â  color: var(--text-primary);
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  text-overflow: ellipsis;
Â  Â  Â  Â  Â  Â  transition: color var(--transition-normal);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .status {
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  Â  Â  color: var(--text-secondary);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-top: 2px;
Â  Â  Â  Â  Â  Â  transition: color var(--transition-normal);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .status-dot {
Â  Â  Â  Â  Â  Â  width: 8px;
Â  Â  Â  Â  Â  Â  height: 8px;
Â  Â  Â  Â  Â  Â  background-color: var(--online-status);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  Â  Â  Â  margin-right: 6px;
Â  Â  Â  Â  Â  Â  flex-shrink: 0;
Â  Â  Â  Â  Â  Â  animation: pulse 2s infinite;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .header-actions {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 8px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .header-button {
Â  Â  Â  Â  Â  Â  width: 32px;
Â  Â  Â  Â  Â  Â  height: 32px;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  color: var(--accent-color);
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: background-color var(--transition-fast);
Â  Â  Â  Â  Â  Â  background: none;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .header-button:hover {
Â  Â  Â  Â  Â  Â  background-color: var(--input-bg);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .chat-messages {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  padding: 16px;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  Â  Â  background-color: var(--background);
Â  Â  Â  Â  Â  Â  scroll-behavior: smooth;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  transition: background-color var(--transition-normal);
Â  Â  Â  Â  Â  Â  padding-bottom: 80px; /* Add padding to prevent messages from being hidden behind input */
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Custom scrollbar styling */
Â  Â  Â  Â  .chat-messages::-webkit-scrollbar {
Â  Â  Â  Â  Â  Â  width: 6px;
Â  Â  Â  Â  Â  Â  height: 6px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .chat-messages::-webkit-scrollbar-track {
Â  Â  Â  Â  Â  Â  background: transparent;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .chat-messages::-webkit-scrollbar-thumb {
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  transition: opacity var(--transition-normal);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .chat-messages:hover::-webkit-scrollbar-thumb {
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message-container {
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.3s ease-out;
Â  Â  Â  Â  Â  Â  max-width: 100%;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  @keyframes fadeIn {
Â  Â  Â  Â  Â  Â  from { opacity: 0; transform: translateY(8px); }
Â  Â  Â  Â  Â  Â  to { opacity: 1; transform: translateY(0); }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message {
Â  Â  Â  Â  Â  Â  max-width: 80%;
Â  Â  Â  Â  Â  Â  padding: 10px 14px;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  font-size: 15px;
Â  Â  Â  Â  Â  Â  line-height: 1.4;
Â  Â  Â  Â  Â  Â  word-wrap: break-word;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  margin-bottom: 2px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message p {
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message p:last-child {
Â  Â  Â  Â  Â  Â  margin-bottom: 0;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message strong {
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message em {
Â  Â  Â  Â  Â  Â  font-style: italic;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message h1, .message h2, .message h3, .message h4, .message h5, .message h6 {
Â  Â  Â  Â  Â  Â  margin-top: 12px;
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message h1 {
Â  Â  Â  Â  Â  Â  font-size: 1.5em;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message h2 {
Â  Â  Â  Â  Â  Â  font-size: 1.3em;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message h3 {
Â  Â  Â  Â  Â  Â  font-size: 1.2em;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message blockquote {
Â  Â  Â  Â  Â  Â  border-left: 3px solid rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  padding-left: 8px;
Â  Â  Â  Â  Â  Â  margin-left: 0;
Â  Â  Â  Â  Â  Â  margin-right: 0;
Â  Â  Â  Â  Â  Â  font-style: italic;
Â  Â  Â  Â  Â  Â  color: var(--text-secondary);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message code {
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.05);
Â  Â  Â  Â  Â  Â  padding: 2px 4px;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  font-family: monospace;
Â  Â  Â  Â  Â  Â  font-size: 0.9em;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message pre {
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.05);
Â  Â  Â  Â  Â  Â  padding: 8px;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  overflow-x: auto;
Â  Â  Â  Â  Â  Â  margin: 8px 0;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message pre code {
Â  Â  Â  Â  Â  Â  background-color: transparent;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .user-message {
Â  Â  Â  Â  Â  Â  background: var(--user-bubble-gradient);
Â  Â  Â  Â  Â  Â  color: var(--text-on-accent);
Â  Â  Â  Â  Â  Â  margin-left: auto;
Â  Â  Â  Â  Â  Â  border-bottom-right-radius: 4px;
Â  Â  Â  Â  Â  Â  animation: slideInRight 0.3s ease-out;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .user-message-container {
Â  Â  Â  Â  Â  Â  align-items: flex-end;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .bot-message {
Â  Â  Â  Â  Â  Â  background-color: var(--bot-bubble);
Â  Â  Â  Â  Â  Â  color: var(--text-primary);
Â  Â  Â  Â  Â  Â  margin-right: auto;
Â  Â  Â  Â  Â  Â  border-bottom-left-radius: 4px;
Â  Â  Â  Â  Â  Â  animation: slideInLeft 0.3s ease-out;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .bot-message-container {
Â  Â  Â  Â  Â  Â  align-items: flex-start;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Connect consecutive messages from the same sender */
Â  Â  Â  Â  .bot-message-container + .bot-message-container .message {
Â  Â  Â  Â  Â  Â  border-top-left-radius: 4px;
Â  Â  Â  Â  Â  Â  margin-top: -4px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .user-message-container + .user-message-container .message {
Â  Â  Â  Â  Â  Â  border-top-right-radius: 4px;
Â  Â  Â  Â  Â  Â  margin-top: -4px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .error-message {
Â  Â  Â  Â  Â  Â  background-color: #FA383E;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  @keyframes slideInRight {
Â  Â  Â  Â  Â  Â  from { transform: translateX(20px); opacity: 0; }
Â  Â  Â  Â  Â  Â  to { transform: translateX(0); opacity: 1; }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  @keyframes slideInLeft {
Â  Â  Â  Â  Â  Â  from { transform: translateX(-20px); opacity: 0; }
Â  Â  Â  Â  Â  Â  to { transform: translateX(0); opacity: 1; }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message-info {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  margin-bottom: 6px;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .bot-message-container:not(:first-child) .message-info {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message-sender {
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  margin-right: 8px;
Â  Â  Â  Â  Â  Â  color: var(--text-secondary);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message-time {
Â  Â  Â  Â  Â  Â  font-size: 11px;
Â  Â  Â  Â  Â  Â  color: var(--text-secondary);
Â  Â  Â  Â  Â  Â  margin-top: 4px;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  transition: opacity 0.2s ease;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message:hover .message-time {
Â  Â  Â  Â  Â  Â  opacity: 0.8;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .user-message .message-time {
Â  Â  Â  Â  Â  Â  color: rgba(255, 255, 255, 0.8);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message-seen {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: flex-end;
Â  Â  Â  Â  Â  Â  margin-top: 2px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .seen-indicator {
Â  Â  Â  Â  Â  Â  width: 16px;
Â  Â  Â  Â  Â  Â  height: 16px;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .seen-indicator img {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .typing-indicator {
Â  Â  Â  Â  Â  Â  display: inline-flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  padding: 12px 16px;
Â  Â  Â  Â  Â  Â  background-color: var(--bot-bubble);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  margin-right: auto;
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  Â  Â  transition: background-color var(--transition-normal);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .typing-dot {
Â  Â  Â  Â  Â  Â  width: 8px;
Â  Â  Â  Â  Â  Â  height: 8px;
Â  Â  Â  Â  Â  Â  background-color: var(--text-secondary);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  Â  Â  Â  margin: 0 2px;
Â  Â  Â  Â  Â  Â  animation: typingAnimation 1.4s infinite ease-in-out;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .typing-dot:nth-child(1) { animation-delay: 0s; }
Â  Â  Â  Â  .typing-dot:nth-child(2) { animation-delay: 0.2s; }
Â  Â  Â  Â  .typing-dot:nth-child(3) { animation-delay: 0.4s; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  @keyframes typingAnimation {
Â  Â  Â  Â  Â  Â  0%, 60%, 100% { transform: translateY(0); }
Â  Â  Â  Â  Â  Â  30% { transform: translateY(-5px); }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* New fixed input container */
Â  Â  Â  Â  .chat-input-container {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  bottom: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  right: 0;
Â  Â  Â  Â  Â  Â  padding: 12px 16px;
Â  Â  Â  Â  Â  Â  background-color: var(--background);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: flex-end;
Â  Â  Â  Â  Â  Â  border-top: 1px solid rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  z-index: 100;
Â  Â  Â  Â  Â  Â  transition: background-color var(--transition-normal);
Â  Â  Â  Â  Â  Â  max-width: 100%;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  @media (min-width: 768px) {
Â  Â  Â  Â  Â  Â  .chat-input-container {
Â  Â  Â  Â  Â  Â  Â  Â  max-width: 768px;
Â  Â  Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  Â  Â  transform: translateX(-50%);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .input-wrapper {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: flex-end;
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  background-color: var(--input-bg);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  Â  Â  Â  padding-right: 8px;
Â  Â  Â  Â  Â  Â  transition: box-shadow var(--transition-fast), background-color var(--transition-normal);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .input-wrapper:focus-within {
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 0 2px rgba(0, 132, 255, 0.2);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message-input {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  padding: 12px 16px;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  background-color: transparent;
Â  Â  Â  Â  Â  Â  outline: none;
Â  Â  Â  Â  Â  Â  font-size: 15px;
Â  Â  Â  Â  Â  Â  color: var(--text-primary);
Â  Â  Â  Â  Â  Â  resize: none;
Â  Â  Â  Â  Â  Â  max-height: 120px;
Â  Â  Â  Â  Â  Â  min-height: 20px;
Â  Â  Â  Â  Â  Â  line-height: 1.4;
Â  Â  Â  Â  Â  Â  transition: color var(--transition-normal);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .message-input::placeholder {
Â  Â  Â  Â  Â  Â  color: var(--text-secondary);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .send-button {
Â  Â  Â  Â  Â  Â  width: 36px;
Â  Â  Â  Â  Â  Â  height: 36px;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  color: var(--text-secondary);
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: all var(--transition-fast);
Â  Â  Â  Â  Â  Â  background-color: transparent;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  margin-left: 4px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .send-button.active {
Â  Â  Â  Â  Â  Â  color: var(--accent-color);
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 132, 255, 0.1);
Â  Â  Â  Â  Â  Â  transform: scale(1.05);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .send-button:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.05);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .scroll-to-bottom {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  bottom: 80px;
Â  Â  Â  Â  Â  Â  right: 20px;
Â  Â  Â  Â  Â  Â  width: 40px;
Â  Â  Â  Â  Â  Â  height: 40px;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  Â  Â  Â  background-color: var(--background);
Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-md);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  transform: translateY(20px);
Â  Â  Â  Â  Â  Â  transition: all var(--transition-normal);
Â  Â  Â  Â  Â  Â  color: var(--accent-color);
Â  Â  Â  Â  Â  Â  z-index: 5;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  @media (min-width: 768px) {
Â  Â  Â  Â  Â  Â  .scroll-to-bottom {
Â  Â  Â  Â  Â  Â  Â  Â  right: calc(50% - 384px + 20px);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .scroll-to-bottom.visible {
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  transform: translateY(0);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .scroll-to-bottom:hover {
Â  Â  Â  Â  Â  Â  background-color: var(--input-bg);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Mobile optimizations */
Â  Â  Â  Â  @media (max-width: 767px) {
Â  Â  Â  Â  Â  Â  .message {
Â  Â  Â  Â  Â  Â  Â  Â  max-width: 85%;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  .chat-header {
Â  Â  Â  Â  Â  Â  Â  Â  padding: 10px 12px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  .chat-input-container {
Â  Â  Â  Â  Â  Â  Â  Â  padding: 10px 12px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Avatar animations */
Â  Â  Â  Â  .profile-pic.typing {
Â  Â  Â  Â  Â  Â  animation: bounce 0.5s infinite alternate;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  @keyframes bounce {
Â  Â  Â  Â  Â  Â  to { transform: scale(1.05); }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .profile-pic.message-received {
Â  Â  Â  Â  Â  Â  animation: headTilt 0.3s ease-in-out;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  @keyframes headTilt {
Â  Â  Â  Â  Â  Â  0% { transform: rotate(0deg); }
Â  Â  Â  Â  Â  Â  50% { transform: rotate(3deg); }
Â  Â  Â  Â  Â  Â  100% { transform: rotate(0deg); }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="chat-app">
Â  Â  Â  Â  <div class="chat-header">
Â  Â  Â  Â  Â  Â  <div class="back-button" id="back-button">
Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-arrow-left"></i>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="profile-pic">
Â  Â  Â  Â  Â  Â  Â  Â  <img src="avatar.jpeg" alt="Samia's Avatar" onerror="this.src='https://i.imgur.com/JQJxZOY.jpg'">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="header-info">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="profile-name">Samia Afroz ðŸ’–</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="status">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="status-dot"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Active now
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="header-actions">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="header-button" id="theme-toggle" aria-label="Toggle dark mode">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-moon"></i>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="chat-messages" id="chat-messages">
Â  Â  Â  Â  Â  Â  <!-- Messages will appear here -->
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <button class="scroll-to-bottom" id="scroll-to-bottom">
Â  Â  Â  Â  Â  Â  <i class="fas fa-chevron-down"></i>
Â  Â  Â  Â  </button>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="chat-input-container">
Â  Â  Â  Â  Â  Â  <div class="input-wrapper">
Â  Â  Â  Â  Â  Â  Â  Â  <textarea class="message-input" placeholder="Type a message to Samia..." id="message-input" rows="1"></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="send-button" id="send-button" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-paper-plane"></i>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', function() {
Â  Â  Â  Â  Â  Â  // DOM Elements
Â  Â  Â  Â  Â  Â  const messageInput = document.getElementById('message-input');
Â  Â  Â  Â  Â  Â  const sendButton = document.getElementById('send-button');
Â  Â  Â  Â  Â  Â  const chatMessages = document.getElementById('chat-messages');
Â  Â  Â  Â  Â  Â  const statusElement = document.querySelector('.status');
Â  Â  Â  Â  Â  Â  const scrollToBottomBtn = document.getElementById('scroll-to-bottom');
Â  Â  Â  Â  Â  Â  const themeToggle = document.getElementById('theme-toggle');
Â  Â  Â  Â  Â  Â  const themeIcon = themeToggle.querySelector('i');
Â  Â  Â  Â  Â  Â  const profilePic = document.querySelector('.profile-pic');
Â  Â  Â  Â  Â  Â  const backButton = document.getElementById('back-button');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Google Gemini API Key
Â  Â  Â  Â  Â  Â  const GEMINI_API_KEY = 'AIzaSyA4noABIgUKn19XEQqP8aVRkmc7VfvF5Cs';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Gemini API Endpoint
Â  Â  Â  Â  Â  Â  const GEMINI_API_ENDPOINT = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Get the updated prompt from localStorage
Â  Â  Â  Â  Â  Â  const basePrompt = localStorage.getItem('samia_updated_prompt') || '';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Conversation history array to maintain state
Â  Â  Â  Â  Â  Â  let conversationHistory = [];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Check for existing theme preference
Â  Â  Â  Â  Â  Â  if (localStorage.getItem('samia_theme') === 'dark') {
Â  Â  Â  Â  Â  Â  Â  Â  document.body.classList.add('dark-mode');
Â  Â  Â  Â  Â  Â  Â  Â  themeIcon.classList.remove('fa-moon');
Â  Â  Â  Â  Â  Â  Â  Â  themeIcon.classList.add('fa-sun');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Initialize marked.js for Markdown rendering
Â  Â  Â  Â  Â  Â  marked.setOptions({
Â  Â  Â  Â  Â  Â  Â  Â  breaks: true,
Â  Â  Â  Â  Â  Â  Â  Â  gfm: true
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Scroll handling
Â  Â  Â  Â  Â  Â  let isScrolledToBottom = true;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  chatMessages.addEventListener('scroll', function() {
Â  Â  Â  Â  Â  Â  Â  Â  isScrolledToBottom = Math.abs(chatMessages.scrollHeight - chatMessages.clientHeight - chatMessages.scrollTop) < 10;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (isScrolledToBottom) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scrollToBottomBtn.classList.remove('visible');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scrollToBottomBtn.classList.add('visible');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  scrollToBottomBtn.addEventListener('click', function() {
Â  Â  Â  Â  Â  Â  Â  Â  chatMessages.scrollTo({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  top: chatMessages.scrollHeight,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  behavior: 'smooth'
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Input handling
Â  Â  Â  Â  Â  Â  messageInput.addEventListener('input', function() {
Â  Â  Â  Â  Â  Â  Â  Â  this.style.height = 'auto';
Â  Â  Â  Â  Â  Â  Â  Â  this.style.height = (this.scrollHeight) + 'px';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (this.value.trim() !== '') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sendButton.classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sendButton.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sendButton.classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sendButton.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Theme toggle
Â  Â  Â  Â  Â  Â  themeToggle.addEventListener('click', function() {
Â  Â  Â  Â  Â  Â  Â  Â  document.body.classList.toggle('dark-mode');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (document.body.classList.contains('dark-mode')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('samia_theme', 'dark');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  themeIcon.classList.remove('fa-moon');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  themeIcon.classList.add('fa-sun');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('samia_theme', 'light');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  themeIcon.classList.remove('fa-sun');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  themeIcon.classList.add('fa-moon');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Back button
Â  Â  Â  Â  Â  Â  backButton.addEventListener('click', function() {
Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = 'index.html';
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Web Worker for API calls
Â  Â  Â  Â  Â  Â  const workerCode = `
Â  Â  Â  Â  Â  Â  Â  Â  self.onmessage = function(e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const { prompt, endpoint, conversationHistory } = e.data;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Prepare the conversation for the API
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const formattedConversation = [];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Add the base prompt as system message
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formattedConversation.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  role: "user",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  parts: [{ text: prompt }]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formattedConversation.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  role: "model",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  parts: [{ text: "I'll be Samia, your Bangladeshi girlfriend. I'll respond as described." }]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Add all conversation history
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (const message of conversationHistory) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formattedConversation.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  role: message.isUser ? "user" : "model",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  parts: [{ text: message.text }]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetch(endpoint, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  contents: formattedConversation,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generationConfig: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  temperature: 0.7,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  topP: 0.95,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  topK: 40
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(response => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(\`HTTP error! status: \${response.status}\`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(data => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  self.postMessage({ success: true, data });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .catch(error => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  self.postMessage({ success: false, error: error.message });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const workerBlob = new Blob([workerCode], { type: 'application/javascript' });
Â  Â  Â  Â  Â  Â  const workerUrl = URL.createObjectURL(workerBlob);
Â  Â  Â  Â  Â  Â  const worker = new Worker(workerUrl);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  worker.onmessage = function(e) {
Â  Â  Â  Â  Â  Â  Â  Â  const { success, data, error } = e.data;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  hideTyping();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (!success) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessage({ error: true, message: `API Error: ${error}` }, false, true);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusElement.innerHTML = `<div class="status-dot"></div>Active now`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Extract the response text from Gemini API response format
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!data.candidates || !data.candidates[0] || !data.candidates[0].content || !data.candidates[0].content.parts || !data.candidates[0].content.parts[0].text) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error('Invalid response format from Gemini API');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Get the raw text from the response
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let responseText = data.candidates[0].content.parts[0].text.trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Remove "Aiyoo!" or similar phrases from the beginning of the response
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  responseText = responseText.replace(/^(Aiyoo!|Aiyoo|Uff!|Hmph!|Uff|Hmph)(\s+|\s*[!,]\s*)/i, '');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Add to conversation history
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  conversationHistory.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text: responseText,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isUser: false,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timestamp: new Date()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Save conversation history to localStorage
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  saveConversationHistory();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessage(responseText, false);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Show message received animation
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  profilePic.classList.add('message-received');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  profilePic.classList.remove('message-received');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 300);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusElement.innerHTML = `<div class="status-dot"></div>Active now`;
Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("Response Processing Error:", error);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessage({ error: true, message: `Error processing response: ${error.message}` }, false, true);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusElement.innerHTML = `<div class="status-dot"></div>Active now`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  function saveConversationHistory() {
Â  Â  Â  Â  Â  Â  Â  Â  // Only keep the last 20 messages to avoid exceeding API limits
Â  Â  Â  Â  Â  Â  Â  Â  if (conversationHistory.length > 20) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  conversationHistory = conversationHistory.slice(conversationHistory.length - 20);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Save to localStorage
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('samia_conversation_history', JSON.stringify(conversationHistory));
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  function loadConversationHistory() {
Â  Â  Â  Â  Â  Â  Â  Â  const savedHistory = localStorage.getItem('samia_conversation_history');
Â  Â  Â  Â  Â  Â  Â  Â  if (savedHistory) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  conversationHistory = JSON.parse(savedHistory);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Display the loaded conversation
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  conversationHistory.forEach(message => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessage(message.text, message.isUser, false, false);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Scroll to bottom after loading history
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  chatMessages.scrollTop = chatMessages.scrollHeight;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("Error loading conversation history:", error);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // If there's an error, start fresh
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  